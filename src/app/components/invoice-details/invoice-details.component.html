<div class="invoice-details" *ngIf="invoice as i">

  <a routerLink="/invoices" class="go-back">
    <img src="/assets/icon-arrow-left.svg" alt="back arrow" />
    <span>Go back</span>
  </a>

  <!-- Status + Buttons -->
  <div class="invoice-status-bar">
    <span>Status</span>
    <app-status-badge [status]="i.status"></app-status-badge>
    <div class="actions">
      <button class="btn edit" (click)="openEditModal()">Edit</button>
      <button class="btn delete" (click)="deleteInvoice()">Delete</button>
      <button class="btn mark-paid" (click)="markAsPaid()">Mark as Paid</button>
    </div>
  </div>

  <!-- Info Block -->
  <div class="invoice-card">
    <div class="top">
      <div class="id-desc">
        <h2><span>#</span>{{ i.id }}</h2>
        <p>{{ i.description }}</p>
      </div>
      <div class="sender-address">
        <p>{{ i.senderAddress.street }}</p>
        <p>{{ i.senderAddress.city }}</p>
        <p>{{ i.senderAddress.postCode }}</p>
        <p>{{ i.senderAddress.country }}</p>
      </div>
    </div>

    <div class="middle">
      <div class="invoice-dates">
        <div>
          <p>Invoice Date</p>
          <strong>{{ i.createdAt }}</strong>
        </div>
        <div>
          <p>Payment Due</p>
          <strong>{{ i.paymentDue }}</strong>
        </div>
      </div>

      <div class="bill-to">
        <p>Bill To</p>
        <strong>{{ i.clientName }}</strong>
        <p>{{ i.clientAddress.street }}</p>
        <p>{{ i.clientAddress.city }}</p>
        <p>{{ i.clientAddress.postCode }}</p>
        <p>{{ i.clientAddress.country }}</p>
      </div>

      <div class="sent-to">
        <p>Sent to</p>
        <strong>{{ i.clientEmail }}</strong>
      </div>
    </div>

    <div class="item-list">
      <div class="item-list-header">
        <p>Item Name</p>
        <p>QTY</p>
        <p>Price</p>
        <p>Total</p>
      </div>

      <div class="item" *ngFor="let item of i.items">
        <p>{{ item.name }}</p>
        <p>{{ item.quantity }}</p>
        <p>{{ item.price | currency }}</p>
        <p>{{ item.total | currency }}</p>
      </div>
    </div>

    <div class="grand-total">
      <p>Amount Due</p>
      <h2>{{ i.total | currency }}</h2>
    </div>
  </div>

</div>